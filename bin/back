#!/usr/bin/env zsh

label=map-usb
mount_point=$(lsblk -o label,mountpoint | grep $label | awk '{print $2}')

if ! [ $mount_point ]; then
  echo "backup drive not mounted"
  exit 1
fi

rsync --recursive --update --copy-links --group --verbose --partial --progress \
      $* /home/perlinm/Workspace $mount_point \
      --exclude="*/.config/google-chrome/*" \
      --exclude="*/mox/data/*" \
      --exclude="*/mox/scripts/outputs/*" \
      --exclude="*/puc/bimodal/results/*" \
      --exclude="*/qcdg/data/*" \
      --exclude="*/bin/vpn" \
      --exclude="*/hopfield-neural-network/data/*" \
      --exclude="*/hopfield-neural-network/jobs/*" \
      --exclude="*/hopfield-neural-network/rc-data/*"
