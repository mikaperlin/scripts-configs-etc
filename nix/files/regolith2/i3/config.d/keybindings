###############################################################################
# navigation within a workspace
###############################################################################

focus_wrapping no

# change window focus
bindsym $mod+a focus left
bindsym $mod+s focus right
bindsym $mod+w focus up
bindsym $mod+r focus down
bindsym $mod+n focus left
bindsym $mod+i focus right
bindsym $mod+u focus up
bindsym $mod+e focus down

# move window
bindsym $mod+Shift+a move left
bindsym $mod+Shift+s move right
bindsym $mod+Shift+w move up
bindsym $mod+Shift+r move down
bindsym $mod+Shift+n move left
bindsym $mod+Shift+i move right
bindsym $mod+Shift+u move up
bindsym $mod+Shift+e move down

# toggle tiling vs. floating
bindsym $mod+t floating toggle
bindsym $mod+Shift+t focus mode_toggle

# toggle fullscreen
bindsym $mod+z fullscreen toggle

# toggle window orientation
bindsym $mod+BackSpace split toggle
 
# use mouse+$mod to drag floating windows
floating_modifier $mod

# resize window
bindsym $mod+Left resize shrink width 3 px or 3 ppt
bindsym $mod+Up resize shrink height 3 px or 3 ppt
bindsym $mod+Right resize grow width 3 px or 3 ppt
bindsym $mod+Down resize grow height 3 px or 3 ppt

###############################################################################
# changing workspaces
###############################################################################

# move to workspace
bindsym $mod+grave workspace 0
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10
bindsym $mod+minus workspace 11
bindsym $mod+plus workspace 12
bindsym $mod+x workspace back_and_forth
bindsym $mod+q workspace prev_on_output
bindsym $mod+f workspace next_on_output
bindsym $mod+l workspace prev_on_output
bindsym $mod+y workspace next_on_output

# move container to workspace
bindsym $mod+$alt+grave move container to workspace 0
bindsym $mod+$alt+1 move container to workspace 1
bindsym $mod+$alt+2 move container to workspace 2
bindsym $mod+$alt+3 move container to workspace 3
bindsym $mod+$alt+4 move container to workspace 4
bindsym $mod+$alt+5 move container to workspace 5
bindsym $mod+$alt+6 move container to workspace 6
bindsym $mod+$alt+7 move container to workspace 7
bindsym $mod+$alt+8 move container to workspace 8
bindsym $mod+$alt+9 move container to workspace 9
bindsym $mod+$alt+0 move container to workspace 10
bindsym $mod+$alt+minus move container to workspace 11
bindsym $mod+$alt+plus move container to workspace 12
bindsym $mod+$alt+x move container to workspace back_and_forth
bindsym $mod+$alt+q move container to workspace prev_on_output
bindsym $mod+$alt+f move container to workspace next_on_output
bindsym $mod+$alt+l move container to workspace prev_on_output
bindsym $mod+$alt+y move container to workspace next_on_output

# follow container to workspace
bindsym $mod+Shift+grave move container to workspace 0; workspace 0
bindsym $mod+Shift+1 move container to workspace 1; workspace 1
bindsym $mod+Shift+2 move container to workspace 2; workspace 2
bindsym $mod+Shift+3 move container to workspace 3; workspace 3
bindsym $mod+Shift+4 move container to workspace 4; workspace 4
bindsym $mod+Shift+5 move container to workspace 5; workspace 5
bindsym $mod+Shift+6 move container to workspace 6; workspace 6
bindsym $mod+Shift+7 move container to workspace 7; workspace 7
bindsym $mod+Shift+8 move container to workspace 8; workspace 8
bindsym $mod+Shift+9 move container to workspace 9; workspace 9
bindsym $mod+Shift+0 move container to workspace 10; workspace 10
bindsym $mod+Shift+minus move container to workspace 11; workspace 11
bindsym $mod+Shift+plus move container to workspace 12; workspace 12
bindsym $mod+Shift+x move container to workspace back_and_forth; workspace back_and_forth
bindsym $mod+Shift+q move container to workspace prev_on_output; workspace prev_on_output
bindsym $mod+Shift+f move container to workspace next_on_output; workspace next_on_output
bindsym $mod+Shift+l move container to workspace prev_on_output; workspace prev_on_output
bindsym $mod+Shift+y move container to workspace next_on_output; workspace next_on_output

# swap workspace
set $swap exec --no-startup-id ~/scripts/i3-swap-workspace-by-name.sh
set $move exec --no-startup-id ~/scripts/i3-move-workspace.py
bindsym $mod+Ctrl+grave $swap 0
bindsym $mod+Ctrl+1 $swap 1
bindsym $mod+Ctrl+2 $swap 2
bindsym $mod+Ctrl+3 $swap 3
bindsym $mod+Ctrl+4 $swap 4
bindsym $mod+Ctrl+5 $swap 5
bindsym $mod+Ctrl+6 $swap 6
bindsym $mod+Ctrl+7 $swap 7
bindsym $mod+Ctrl+8 $swap 8
bindsym $mod+Ctrl+9 $swap 9
bindsym $mod+Ctrl+0 $swap 10
bindsym $mod+Ctrl+minus $swap 11
bindsym $mod+Ctrl+plus $swap 12
bindsym $mod+Ctrl+q $move prev
bindsym $mod+Ctrl+f $move next
bindsym $mod+Ctrl+l $move prev
bindsym $mod+Ctrl+y $move next

# move container or workspace to different output
bindsym $mod+c move container to output next
bindsym $mod+Ctrl+c move workspace to output next

mouse_warping none

###############################################################################
# session management
###############################################################################

# exit app instance
bindsym $mod+Escape [con_id="__focused__"] kill

# terminate all app instances
bindsym $mod+Ctrl+Escape [con_id="__focused__"] exec --no-startup-id kill -9 $(xdotool getwindowfocus getwindowpid)

# reload i3 config
bindsym $mod+Delete reload

# restart i3
bindsym $mod+Shift+Delete restart

# refresh regolith session
bindsym $mod+Ctrl+Delete exec --no-startup-id /usr/bin/regolith-look refresh

# lock screen
bindsym Ctrl+Escape exec --no-startup-id dbus-send --type=method_call --dest=org.gnome.ScreenSaver /org/gnome/ScreenSaver org.gnome.ScreenSaver.Lock

###############################################################################
# application launchers
###############################################################################

# terminal
bindsym $mod+Tab exec --no-startup-id /usr/bin/x-terminal-emulator

# browser
bindsym $mod+Return exec --no-startup-id gtk-launch $(xdg-settings get default-web-browser)

# settings
bindsym $mod+Shift+Return exec --no-startup-id regolith-control-center --class=floating_window

# display settings
bindsym $mod+d exec --no-startup-id regolith-control-center --class=floating_window display

# bluetooth settings
bindsym $mod+b exec --no-startup-id regolith-control-center --class=floating_window bluetooth

###############################################################################
# personal scripts
###############################################################################

set $script exec --no-startup-id /home/perlinm/scripts

# screenshots
bindsym Print $script/print-screen.sh
bindsym Shift+Print $script/print-screen.sh -s
bindsym $mod+backslash $script/print-screen.sh
bindsym $mod+Shift+backslash $script/print-screen.sh -s

# volume
bindsym Ctrl+Up $script/volume.sh inc
bindsym Ctrl+Down $script/volume.sh dec
bindsym Ctrl+Shift+Up $script/volume.sh max
bindsym Ctrl+Shift+Down $script/volume.sh min
bindsym Ctrl+slash $script/volume.sh toggle
bindsym Ctrl+Shift+slash $script/volume.sh med

# screen brightness (does not work)
bindsym $mod+Ctrl+Up $script/brightness.sh inc
bindsym $mod+Ctrl+Down $script/brightness.sh dec
bindsym $mod+Ctrl+Shift+Up $script/brightness.sh max
bindsym $mod+Ctrl+Shift+Down $script/brightness.sh min
bindsym $mod+Ctrl+slash $script/brightness.sh med

# scratchpads
bindsym $mod+F1 $script/i3-scratchpad -t xfce4-terminal
bindsym $mod+F2 $script/i3-scratchpad -t "xfce4-terminal --command='ipython3 --profile=perlinm --no-banner'"
bindsym $mod+F3 $script/i3-scratchpad -t -d 75%x75% "xfce4-terminal --command=htop"

###############################################################################
# ilia launchers
###############################################################################

# load stylesheet
set_from_resource $ilia.stylesheet ilia.stylesheet

# navigate open windows
bindsym $mod+space exec --no-startup-id ilia -p windows -t $ilia.stylesheet

# application launcher
bindsym $mod+$alt+space exec --no-startup-id ilia -p apps -t $ilia.stylesheet

# notification viewer
bindsym $mod+slash exec --no-startup-id ilia -p notifications -t $ilia.stylesheet

# look selector
bindsym $mod+Ctrl+s exec --no-startup-id regolith-look-selector -t $ilia.stylesheet
