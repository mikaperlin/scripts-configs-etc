# update and install AUR helpes
sudo pacman -Syyu
sudo pacman -S yay

# set KEYMAP=colemak in /etc/vconsole.conf
# manually uncomment 'Color' from /etc/pacman.conf
# set HandleLidSwitch=ignore in /etc/systemd/logind.conf

# get personal configs (after copying over ssh keys)
git clone git@github.com:perlinm/scripts-configs-etc.git

# install nix and home-manager
sudo pacman -S nix
sudo systemctl enable nix-daemon.service
sudo systemctl start nix-daemon.service
sudo gpasswd -a perlinm nix-users
nix-channel --add https://nixos.org/channels/nixpkgs-unstable
nix-channel --add https://github.com/nix-community/home-manager/archive/master.tar.gz home-manager
nix-channel --update
export NIX_PATH=$HOME/.nix-defexpr/channels${NIX_PATH:+:$NIX_PATH}
nix-shell '<home-manager>' -A install
ln -sf ~/nix/home.nix ~/.config/nixpkgs/home.nix
~/.nix-profile/bin/home-manager switch -b backup

# WARNING: everything nix-related needs to be removed from the PATH to build packages in the AUR

# sway
sudo pacman -S sway polkit swaybg swayidle waybar xorg-xwayland
sudo pacman -S autotiling-rs brightnessctl grim slurp wdisplays wl-clipboard
yay -S swaylock-effects swaync swaytools wev  # remove nix from PATH
sudo pacman -S i3  # for workspace moving scripts, which use i3-msg (for backwards compatibility)

# to enable wayland mode for firefox
echo "MOZ_ENABLE_WAYLAND=1" >> /etc/environment

# network management applet (in tray)
sudo pacman -S network-manager-applet

# terminal emulators
sudo pacman -S alacritty xfce4-terminal

# volume control
sudo pacman -S pavucontrol

# for Teams, and screen sharing in Teams
yay -S google-chrome
sudo pacman -Rns xdg-desktop-portal-gnome
sudo pacman -S xdg-desktop-portal-wlr
# enable WebRPC PipeWire support: chrome://flags/#enable-webrtc-pipewire-capturer

# manually install zotero plugins from: https://www.zotero.org/support/plugins
# Better Bibtex, ZotFile, Zutilo, shortDOI

# python
sudo pacman -S python ipython flake8 mypy jupyter-notebook pyenv
sudo pacman -S python-matplotlib python-networkx python-numpy python-scipy python-sympy
yay -S pyenv-virtualenv  # remove nix from PATH
pip install cirq

# misc.
sudo pacman -S libreoffice

# for ColdQuanta VPN
sudo pacman -S netextender